{
  "Resources": {
    "resources": {
      "Type": "AWS::DevOpsGuru::ResourceCollection",
      "Properties": {
        "ResourceCollectionFilter": {
          "CloudFormation": {
            "StackNames": [
              "*"
            ]
          }
        }
      },
      "Metadata": {
        "aws:cdk:path": "CdkDevopsguruStack-stage/resources"
      }
    },
    "DevOpsGuruCMKCCA1BA9F": {
      "Type": "AWS::KMS::Key",
      "Properties": {
        "KeyPolicy": {
          "Statement": [
            {
              "Action": "kms:*",
              "Effect": "Allow",
              "Principal": {
                "AWS": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":iam::775492342640:root"
                    ]
                  ]
                }
              },
              "Resource": "*"
            }
          ],
          "Version": "2012-10-17"
        }
      },
      "UpdateReplacePolicy": "Retain",
      "DeletionPolicy": "Retain",
      "Metadata": {
        "aws:cdk:path": "CdkDevopsguruStack-stage/DevOpsGuruCMK/Resource"
      }
    },
    "DevOpsGuruCMKAliasA604F0F6": {
      "Type": "AWS::KMS::Alias",
      "Properties": {
        "AliasName": "alias/devopsguru",
        "TargetKeyId": {
          "Fn::GetAtt": [
            "DevOpsGuruCMKCCA1BA9F",
            "Arn"
          ]
        }
      },
      "Metadata": {
        "aws:cdk:path": "CdkDevopsguruStack-stage/DevOpsGuruCMK/Alias/Resource"
      }
    },
    "TopicBFC7AF6E": {
      "Type": "AWS::SNS::Topic",
      "Properties": {
        "DisplayName": "DevOps Guru subscription topic",
        "KmsMasterKeyId": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":kms:us-west-2:775492342640:alias/devopsguru"
            ]
          ]
        },
        "TopicName": "DevopsGuru"
      },
      "Metadata": {
        "aws:cdk:path": "CdkDevopsguruStack-stage/Topic/Resource"
      }
    },
    "TopicTokenSubscription178F3F75E": {
      "Type": "AWS::SNS::Subscription",
      "Properties": {
        "Protocol": "email",
        "TopicArn": {
          "Ref": "TopicBFC7AF6E"
        },
        "Endpoint": {
          "Ref": "emailAddress"
        }
      },
      "Metadata": {
        "aws:cdk:path": "CdkDevopsguruStack-stage/Topic/TokenSubscription:1/Resource"
      }
    },
    "notification": {
      "Type": "AWS::DevOpsGuru::NotificationChannel",
      "Properties": {
        "Config": {
          "Sns": {
            "TopicArn": {
              "Ref": "TopicBFC7AF6E"
            }
          }
        }
      },
      "Metadata": {
        "aws:cdk:path": "CdkDevopsguruStack-stage/notification"
      }
    },
    "DevopsGuruStackSet": {
      "Type": "AWS::CloudFormation::StackSet",
      "Properties": {
        "PermissionModel": "SERVICE_MANAGED",
        "StackSetName": "EnableDevOpsGuruForAccount3",
        "AutoDeployment": {
          "Enabled": true,
          "RetainStacksOnAccountRemoval": true
        },
        "Description": "EnableDevOpsGuruForAccount3",
        "StackInstancesGroup": [
          {
            "DeploymentTargets": {
              "OrganizationalUnitIds": {
                "Ref": "OrganizationalUnitIds"
              }
            },
            "Regions": [
              "us-east-1",
              "us-east-2"
            ]
          }
        ],
        "TemplateBody": "\n        Resources:\n          DevOpsGuruMonitoring:\n            Type: AWS::DevOpsGuru::ResourceCollection\n            Properties:\n              ResourceCollectionFilter:\n                CloudFormation:\n                  StackNames: ['*']\n    \n          Topic: \n            Type: AWS::SNS::Topic\n            Properties: \n              TopicName: \"DevopsGuruTopic\"\n          \n          MySubscription:\n            Type: AWS::SNS::Subscription\n            Properties:\n              Endpoint: gikwadr@amazon.com\n              Protocol: email\n              TopicArn: !Ref 'Topic'\n          \n          DevOpsGuruNotification:\n            Type: AWS::DevOpsGuru::NotificationChannel\n            Properties:\n              Config:\n                Sns:\n                  TopicArn: !Ref Topic"
      },
      "Metadata": {
        "aws:cdk:path": "CdkDevopsguruStack-stage/DevopsGuruStackSet"
      }
    },
    "CDKMetadata": {
      "Type": "AWS::CDK::Metadata",
      "Properties": {
        "Analytics": "v2:deflate64:H4sIAAAAAAAAE01P0WrDMAz8lr27akMZ29428lgoo+kPeIrSunGsYNktw/jfV7UM8nS60+nENVA+3mHz8mlvssJ+XCNHgtIli6Nph/Bto50oUTQtB0kxY1L5QMI5IlXTbN6W54qlpyvPcsoxQ1mYW/aeMDkOGrHn5AaHVnl7tiGQr2acBMqOftWg8OWdFSWPoRoJ9/2RZ4cqPocu/whGN/8HL3k16Dn3A8fp8Qh0r906SrWawD3BRdbX5hW29xoXcW4Vc0huIjg88Q9gu5+nIgEAAA=="
      },
      "Metadata": {
        "aws:cdk:path": "CdkDevopsguruStack-stage/CDKMetadata/Default"
      }
    }
  },
  "Parameters": {
    "emailAddress": {
      "Type": "String",
      "Description": "Email id to receive SNS Notifications"
    },
    "OrganizationalUnitIds": {
      "Type": "List<String>",
      "Description": "Organizational Unit Ids to deploy StackSet"
    }
  }
}